<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Sammy Shear</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href="static/css/index.css" rel="stylesheet">
		<link rel="stylesheet" href="https://unpkg.com/terminal.css@0.7.2/dist/terminal.min.css" />
		<script src="static/js/htmx.min.js"></script>
		<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
		<script src="https://unpkg.com/htmx.org/dist/ext/json-enc.js"></script>
		<script type="application/javascript">
			let data = { posts: [{}] };
			let reactivePosts;
			document.addEventListener("alpine:init", () => {
				reactivePosts = Alpine.reactive(data);
			});
		</script>
	</head>
	<body class="terminal">
		<header class="container">
			<hgroup x-data="{
			text: '',
			textArray : ['Sammy Shear', 'Developer', 'Blogger'],
			textIndex: 0,
			charIndex: 0,
			pauseEnd: 1000,
			pauseStart: 20,
			typeSpeed: 125,
			direction: 'forward'
                }" 
x-init="(() => {
	let typingInterval = setInterval(type, $data.typeSpeed);

	function type() {
		let current = $data.textArray[$data.textIndex];
		if ($data.charIndex > current.length) {
			$data.direction = 'backward';
			clearInterval(typingInterval);
			setTimeout(function() {
				typingInterval = setInterval(type, $data.typeSpeed);
			}, $data.pauseEnd);
		}

		$data.text = current.substring(0, $data.charIndex);
		if ($data.direction == 'forward') {
			$data.charIndex++;
		} else {
			if ($data.charIndex == 0) {
				$data.direction = 'forward';
				clearInterval(typingInterval);
				setTimeout(function() {
					$data.textIndex++;
					if ($data.textIndex >= $data.textArray.length) {
						$data.textIndex = 0;
					}

					typingInterval = setInterval(type, $data.typeSpeed);
				}, $data.pauseStart);
			}
			$data.charIndex--;
		}
	}
})();"
				class="typer">
				<h1>sshear@dev</h1>
				<h1 class="logo terminal-prompt" x-text="text"></h1>
			</hgroup>
			<nav class="terminal-menu">
				<ul>
					<li>
						<a href="#" class="menu-item active">Blog</a>
					</li>
					<li>
						<a href="#portfolio" class="menu-item">Portfolio</a>
					</li>
				</ul>
			</nav>
		</header>
		<main class="container">
			<section x-data x-on:htmx:after-swap="reactivePosts.posts = JSON.parse($event.detail.xhr.response)" hx-get="/api/posts" hx-trigger="load" hx-swap="none" id="postSection" class="card-grid">
				<template x-for="post in reactivePosts.posts" :key="post.id">
					<div class="terminal-card">
						<header x-text="post.title" style=""></header>
						<div>
							<span x-text="post.body_prev"></span> <a href="#" @click="reactivePosts.curPost = post.id; reactivePosts.open = !reactivePosts.open">Read more...</a>
							<template x-if="reactivePosts.curPost === post.id && reactivePosts.open">
								<pre x-text="post.body"></pre>
							</template>
						</div>
					</div>
				</template>
			</section>
		</main>

		<br>
		<br>

		<section id="portfolio" class="container terminal-timeline">
			<div class="terminal-card">
				<header>This Site</header>
				<div>Stack: HTMX + AlpineJS + Rust + Actix-Web. <a href="https://github.com/sammyshear/sshear-dev">GitHub</a></div>
			</div>
			<div class="terminal-card">
				<header>Waypoints for Homes</header>
				<div>Minecraft plugin and mod combo written in Java for paper and fabric. <a href="https://github.com/sammyshear/waypoints4homes">GitHub</a></div>
			</div>
			<div class="terminal-card">
				<header>Dev.to Old Blog Posts</header>
				<div>Assorted posts on dev.to, some with GitHub links to another account I used with it. <a href="dev.to/sammyshear">Link</a></div>
			</div>
		</section>
	</body>
</html>
